(self.webpackChunkvuepress_blog=self.webpackChunkvuepress_blog||[]).push([[5076],{9008:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>p});const p={key:"v-0b3a6d15",path:"/pages/fe-sre/webpack/",title:"",lang:"zh-CN",frontmatter:{home:!1},excerpt:"",headers:[{level:3,title:"webpack ä½¿ç”¨ç¬”è®°",slug:"webpack-ä½¿ç”¨ç¬”è®°",children:[]}],filePathRelative:"pages/fe-sre/webpack/README.md",git:{updatedTime:1741591165e3,contributors:[{name:"COOKIES-LGL",email:"1344714332@qq.com",commits:24}]}}},106:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var p=a(6252);const e=(0,p.uE)('<h3 id="webpack-ä½¿ç”¨ç¬”è®°"><a class="header-anchor" href="#webpack-ä½¿ç”¨ç¬”è®°">#</a> webpack ä½¿ç”¨ç¬”è®°</h3><p>Webpack åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šè§¦å‘ä¸€ç³»åˆ—çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œå¼€å‘è€…å¯ä»¥é’ˆå¯¹è¿™äº›äº‹ä»¶è¿›è¡Œç›¸åº”çš„å¤„ç†æˆ–æ’ä»¶åŒ–ã€‚ä¸‹é¢æ˜¯ Webpack çš„ä¸»è¦ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼š</p><ul><li>beforeRunï¼šåœ¨ Webpack å¼€å§‹æ‰§è¡Œæ„å»ºä»»åŠ¡å‰è§¦å‘çš„äº‹ä»¶ã€‚</li><li>runï¼šWebpack å¼€å§‹è¿›è¡Œç¼–è¯‘æ‰“åŒ…æ—¶è§¦å‘çš„äº‹ä»¶ã€‚</li><li>beforeCompileï¼šåœ¨ Webpack å¼€å§‹ç¼–è¯‘ä¹‹å‰è§¦å‘çš„äº‹ä»¶ã€‚</li><li>compileï¼šWebpack å¼€å§‹ç¼–è¯‘æ—¶è§¦å‘çš„äº‹ä»¶ã€‚</li><li>compilationï¼šåœ¨ Webpack çš„æ¯æ¬¡ç¼–è¯‘æ„å»ºè¿‡ç¨‹ä¸­è§¦å‘çš„äº‹ä»¶ã€‚</li><li>emitï¼šåœ¨ Webpack è¾“å‡ºèµ„æºåˆ° output ç›®å½•ä¹‹å‰è§¦å‘çš„äº‹ä»¶ã€‚</li><li>afterEmitï¼šåœ¨ Webpack è¾“å‡ºèµ„æºåˆ° output ç›®å½•ä¹‹åè§¦å‘çš„äº‹ä»¶ã€‚</li><li>doneï¼šWebpack æ„å»ºå®Œæˆæ‰€æœ‰çš„ç¼–è¯‘ã€å’Œè¾“å‡ºç­‰ä»»åŠ¡ä¹‹åè§¦å‘çš„äº‹ä»¶ã€‚</li><li>failedï¼šWebpack æ„å»ºè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯æ—¶è§¦å‘çš„äº‹ä»¶ã€‚</li></ul><p>å¯ä»¥é€šè¿‡ npm install --production å®ç°ä»…å®‰è£… dependencies ä¸­çš„ä¾èµ–</p>',4),t={href:"https://zhuanlan.zhihu.com/p/443964387",target:"_blank",rel:"noopener noreferrer"},o=(0,p.Uk)("ä¸€ç¯‡è¯¦è§£ webpack"),c=(0,p.Wm)("br",null,null,-1),l={href:"https://pcaaron.github.io/pages/fe/webpack/plugin.html#%E6%8F%92%E4%BB%B6%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86",target:"_blank",rel:"noopener noreferrer"},r=(0,p.Uk)("å‚è€ƒç¼–å†™ä¸€ä¸ª loader å’Œ plugins"),u=(0,p.Wm)("br",null,null,-1),i={href:"https://zhuanlan.zhihu.com/p/397174187",target:"_blank",rel:"noopener noreferrer"},k=(0,p.Uk)("webpack-Loader è¯¦è§£"),b=(0,p.Wm)("br",null,null,-1),m={href:"https://segmentfault.com/a/1190000041726881?sort=votes",target:"_blank",rel:"noopener noreferrer"},d=(0,p.Uk)("webpack5 æŒä¹…ç¼“å­˜"),g=(0,p.Wm)("br",null,null,-1),h={href:"https://www.pipipi.net/30583.html/amp",target:"_blank",rel:"noopener noreferrer"},v=(0,p.Uk)("æ·±åº¦è§£æ webpack æ‰“åŒ…æµç¨‹"),w=(0,p.Wm)("br",null,null,-1),f={href:"https://www.zhihu.com/tardis/bd/art/149323563",target:"_blank",rel:"noopener noreferrer"},q=(0,p.Uk)("webpack ä¸ rollup èƒŒåçš„ acorn"),y=(0,p.Wm)("br",null,null,-1),W={href:"https://blog.csdn.net/qq_17175013/article/details/119769033",target:"_blank",rel:"noopener noreferrer"},j=(0,p.Uk)("webpack5 çš„æ–°å¢ç‰¹æ€§"),S={href:"https://blog.osvlabs.com/?p=582",target:"_blank",rel:"noopener noreferrer"},x=(0,p.Uk)("Https å¯åŠ¨æœåŠ¡"),P=(0,p.uE)('<h4 id="åŠ¨æ€åŒ¹é…é…ç½®ä¿¡æ¯"><a class="header-anchor" href="#åŠ¨æ€åŒ¹é…é…ç½®ä¿¡æ¯">#</a> åŠ¨æ€åŒ¹é…é…ç½®ä¿¡æ¯</h4><p>å¦‚æœè¦æ ¹æ® webpack.config.js ä¸­çš„ mode å˜é‡æ›´æ”¹æ‰“åŒ…è¡Œä¸ºï¼Œåˆ™å¿…é¡»å°†é…ç½®å¯¼å‡ºä¸ºå‡½æ•°ï¼Œè€Œä¸æ˜¯å¯¼å‡ºå¯¹è±¡ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>\n  entry<span class="token operator">:</span> <span class="token string">&quot;./app.js&quot;</span><span class="token punctuation">,</span>\n  <span class="token comment">//...</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nmodule<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>argv<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>argv<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">//...</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> config<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="webpack-çš„çƒ­æ›´æ–°åŸç†"><a class="header-anchor" href="#webpack-çš„çƒ­æ›´æ–°åŸç†">#</a> webpack çš„çƒ­æ›´æ–°åŸç†</h4><div class="language-m ext-m line-numbers-mode"><pre class="language-m"><code>é¢è¯•å®˜æ¯”è¾ƒæƒ³å¬åˆ°çš„æ˜¯å·¥ä½œæµç¨‹å’Œå…³é”®ç‚¹ï¼Œéâ€œæµæ°´è´¦â€å¼çš„æºç åˆ†æã€‚æˆ‘è®¤ä¸ºå¯ä»¥è¿™æ ·çš„ä»‹ç»ï¼š\n\né¦–å…ˆï¼Œä»‹ç»webpack-dev-server:\nwebpack-dev-server ä¸»è¦åŒ…å«äº†ä¸‰ä¸ªéƒ¨åˆ†ï¼š\n1.webpack: è´Ÿè´£ç¼–è¯‘ä»£ç \n2.webpack-dev-middleware: ä¸»è¦è´Ÿè´£æ„å»ºå†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼ŒæŠŠwebpackçš„ OutputFileSystem æ›¿æ¢æˆ InMemoryFileSystemã€‚åŒæ—¶ä½œä¸ºExpressçš„ä¸­é—´ä»¶æ‹¦æˆªè¯·æ±‚ï¼Œä»å†…å­˜æ–‡ä»¶ç³»ç»Ÿä¸­æŠŠç»“æœæ‹¿å‡ºæ¥ã€‚\n3.expressï¼šè´Ÿè´£æ­å»ºè¯·æ±‚è·¯ç”±æœåŠ¡ã€‚\n\nå…¶æ¬¡ï¼Œä»‹ç»å·¥ä½œæµç¨‹:\n1.å¯åŠ¨dev-serverï¼Œwebpackå¼€å§‹æ„å»ºï¼Œåœ¨ç¼–è¯‘æœŸé—´ä¼šå‘ entry æ–‡ä»¶æ³¨å…¥çƒ­æ›´æ–°ä»£ç ï¼›\n2.Client é¦–æ¬¡æ‰“å¼€åï¼ŒServer å’Œ Client åŸºäºSocketå»ºç«‹é€šè®¯æ¸ é“ï¼›\n3.ä¿®æ”¹æ–‡ä»¶ï¼ŒServer ç«¯ç›‘å¬æ–‡ä»¶å‘é€å˜åŠ¨ï¼Œwebpackå¼€å§‹ç¼–è¯‘ï¼Œç›´åˆ°ç¼–è¯‘å®Œæˆä¼šè§¦å‘&quot;Done&quot;äº‹ä»¶ï¼›\n4.Serveré€šè¿‡socket å‘é€æ¶ˆæ¯å‘ŠçŸ¥ Clientï¼›\n5.Clientæ ¹æ®Serverçš„æ¶ˆæ¯ï¼ˆhashå€¼å’ŒstateçŠ¶æ€ï¼‰ï¼Œé€šè¿‡ajaxè¯·æ±‚è·å– Server çš„manifestæè¿°æ–‡ä»¶ï¼›\n6.Clientå¯¹æ¯”å½“å‰ modules tree ï¼Œå†æ¬¡å‘è¯·æ±‚åˆ° Server ç«¯è·å–æ–°çš„JSæ¨¡å—ï¼›\n7.Clientè·å–åˆ°æ–°çš„JSæ¨¡å—åï¼Œä¼šæ›´æ–° modules treeå¹¶æ›¿æ¢æ‰ç°æœ‰çš„æ¨¡å—ï¼›\n8.æœ€åè°ƒç”¨ module.hot.accept() å®Œæˆçƒ­æ›´æ–°ï¼›\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="ç¼–å†™æ’ä»¶åœ¨æŒ‡å®šæ’ä»¶åæ‰§è¡Œ"><a class="header-anchor" href="#ç¼–å†™æ’ä»¶åœ¨æŒ‡å®šæ’ä»¶åæ‰§è¡Œ">#</a> ç¼–å†™æ’ä»¶åœ¨æŒ‡å®šæ’ä»¶åæ‰§è¡Œ</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyCustomPlugin</span> <span class="token punctuation">{</span>\n  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterPlugins<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&quot;MyCustomPlugin&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token comment">// åœ¨è¿™é‡Œç¼–å†™ä½ çš„é€»è¾‘</span>\n      <span class="token comment">// ç¡®ä¿è¿™ä¸ªæ’ä»¶åœ¨SomeOtherPluginä¹‹åæ‰§è¡Œ</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyCustomPlugin<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> SomeOtherPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;some-other-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> MyCustomPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./MyCustomPlugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ... å…¶ä»–webpacké…ç½®</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">SomeOtherPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyCustomPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¯·æ³¨æ„ï¼ŒafterPlugins é’©å­æ˜¯åœ¨æ‰€æœ‰æ’ä»¶éƒ½åº”ç”¨ä¹‹åè§¦å‘çš„ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨è¿™ä¸ªé’©å­ä¸­æ‰§è¡Œä»£ç ï¼Œç¡®ä¿å®ƒåœ¨å…¶ä»–æ’ä»¶ä¹‹åæ‰§è¡Œã€‚<br> å¦‚æœä½ éœ€è¦æ›´ç²¾ç¡®åœ°æ§åˆ¶ï¼Œå¯èƒ½éœ€è¦æŸ¥çœ‹ç‰¹å®šæ’ä»¶çš„æ–‡æ¡£ï¼Œçœ‹çœ‹å®ƒä»¬æä¾›çš„é’©å­ï¼Œå¹¶é€‰æ‹©æœ€é€‚åˆä½ éœ€æ±‚çš„é’©å­ã€‚</p><h4 id="tapable-äº‹ä»¶æœºåˆ¶"><a class="header-anchor" href="#tapable-äº‹ä»¶æœºåˆ¶">#</a> Tapable äº‹ä»¶æœºåˆ¶</h4><p>Tapable æ˜¯ä¸€ä¸ªç±»ä¼¼äº Node.js ä¸­çš„ EventEmitter çš„åº“ï¼Œä½†å®ƒæ›´ä¸“æ³¨äºè‡ªå®šä¹‰äº‹ä»¶çš„è§¦å‘å’Œå¤„ç†ã€‚<br> é€šè¿‡ Tapable æˆ‘ä»¬å¯ä»¥æ³¨å†Œè‡ªå®šä¹‰äº‹ä»¶ï¼Œç„¶ååœ¨é€‚å½“çš„æ—¶æœºå»æ‰§è¡Œè‡ªå®šä¹‰äº‹ä»¶ã€‚<br> è¿™ä¸ªå’Œæˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç±»ä¼¼ï¼Œåœ¨ç‰¹å®šçš„æ—¶æœºå»è§¦å‘ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> SyncHook <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;tapable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// å®ä¾‹åŒ– é’©å­å‡½æ•° å®šä¹‰å½¢å‚</span>\n<span class="token keyword">const</span> syncHook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//é€šè¿‡tapå‡½æ•°æ³¨å†Œäº‹ä»¶</span>\nsyncHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&quot;åŒæ­¥é’©å­1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;åŒæ­¥é’©å­1&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//åŒæ­¥é’©å­ é€šè¿‡call å‘å¸ƒäº‹ä»¶</span>\n<span class="token function">syncHook</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;é‚£å…”å‰ç«¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¤§è‡´å¯ä»¥å°† Tapable çš„ä½¿ç”¨åˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥:</p><ul><li>å®ä¾‹åŒ–é’©å­å‡½æ•°</li><li>äº‹ä»¶æ³¨å†Œ</li><li>äº‹ä»¶è§¦å‘</li></ul><h4 id="äº‹ä»¶æ³¨å†Œ"><a class="header-anchor" href="#äº‹ä»¶æ³¨å†Œ">#</a> äº‹ä»¶æ³¨å†Œ</h4><p>åŒæ­¥çš„é’©å­è¦ç”¨ tap æ–¹æ³•æ¥æ³¨å†Œäº‹ä»¶å¼‚æ­¥çš„é’©å­å¯ä»¥åƒåŒæ­¥æ–¹å¼ä¸€æ ·ç”¨ tap æ–¹æ³•æ¥æ³¨å†Œï¼Œä¹Ÿå¯ä»¥ç”¨ tapAsync æˆ– tapPromise å¼‚æ­¥æ–¹æ³•æ¥æ³¨å†Œã€‚</p><ul><li>tapAsyncï¼š ä½¿ç”¨ç”¨ tapAsync æ–¹æ³•æ¥æ³¨å†Œ hook æ—¶ï¼Œå¿…é¡»è°ƒç”¨ callback å›è°ƒå‡½æ•°ã€‚</li><li>tapPromiseï¼šä½¿ç”¨ tapPromise æ–¹æ³•æ¥æ³¨å†Œ hook æ—¶ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ª pormise ï¼Œå¼‚æ­¥ä»»åŠ¡å®Œæˆå resolve ã€‚</li></ul><h4 id="äº‹ä»¶è§¦å‘"><a class="header-anchor" href="#äº‹ä»¶è§¦å‘">#</a> äº‹ä»¶è§¦å‘</h4><p>åŒæ­¥çš„é’©å­è¦ç”¨ call æ–¹æ³•æ¥è§¦å‘å¼‚æ­¥çš„é’©å­éœ€è¦ç”¨ callAsync æˆ– promise å¼‚æ­¥æ–¹æ³•æ¥è§¦å‘ã€‚</p><ul><li>callAsyncï¼šå½“æˆ‘ä»¬ç”¨ callAsync æ–¹æ³•æ¥è°ƒç”¨ hook æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯æ‰§è¡Œä»»åŠ¡çš„æœ€åä¸€ä¸ªè¿”å›å€¼</li><li>promiseï¼šå½“æˆ‘ä»¬ç”¨ promise æ–¹æ³•æ¥è°ƒç”¨ hook æ—¶ï¼Œéœ€è¦ä½¿ç”¨ then æ¥å¤„ç†æ‰§è¡Œç»“æœï¼Œå‚æ•°æ˜¯æ‰§è¡Œä»»åŠ¡çš„æœ€åä¸€ä¸ªè¿”å›å€¼ã€‚</li></ul><h4 id="webpack-æ’ä»¶-webpack-provideplugin"><a class="header-anchor" href="#webpack-æ’ä»¶-webpack-provideplugin">#</a> webpack æ’ä»¶ webpack.ProvidePlugin</h4><p>é¡¹ç›®ä¸­ç”¨åˆ°çš„å˜é‡/å‡½æ•°/åº“æˆ–å·¥å…·ï¼Œåªè¦é…ç½®åå°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨äº†</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// å…¶ä»–é…ç½®...</span>\n  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token keyword">new</span> <span class="token class-name">webpack</span><span class="token punctuation">.</span><span class="token function">ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      React<span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>\n      dayjs<span class="token operator">:</span> <span class="token string">&quot;dayjs&quot;</span><span class="token punctuation">,</span>\n      <span class="token comment">// å‡è®¾é¡¹ç›®ä¸­è‡ªå·±å®šä¹‰çš„utils.jsåœ¨srcç›®å½•ä¸‹</span>\n      Utils<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/utils.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token comment">// å…¶ä»–é…ç½®...</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="farm-æ–°ä¸€ä»£æ„å»ºå·¥å…·"><a class="header-anchor" href="#farm-æ–°ä¸€ä»£æ„å»ºå·¥å…·">#</a> Farm æ–°ä¸€ä»£æ„å»ºå·¥å…·</h4><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Farm æ˜¯ä¸€ä¸ªéå¸¸å¿«çš„åŸºäº Rust çš„ Web æ„å»ºå·¥å…·ï¼Œç±»ä¼¼ webpack å’Œ viteï¼Œä½†æ›´å¿«ã€‚ farm resolve, load, transform æ‰€æœ‰ asset(js/jsx/ts/tsxã€css/sass/lessã€htmlã€é™æ€èµ„æºã€json ç­‰)ï¼Œå¹¶å°†å®ƒä»¬æ‰“åŒ…æˆä¸€ç³»åˆ—å¯éƒ¨ç½²æ–‡ä»¶ã€‚ åˆ›å»ºé¡¹ç›®</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> create farm@latest\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div><h4 id="purgecss-webpack-plugin"><a class="header-anchor" href="#purgecss-webpack-plugin">#</a> purgecss-webpack-plugin</h4><p>å¸®åŠ©å»é™¤æœªä½¿ç”¨çš„ CSS ä»£ç </p><h4 id="åœ¨-webpack-ä¸­ä½¿ç”¨-typescript-é…ç½®"><a class="header-anchor" href="#åœ¨-webpack-ä¸­ä½¿ç”¨-typescript-é…ç½®">#</a> åœ¨ Webpack ä¸­ä½¿ç”¨ TypeScript é…ç½®</h4><p>ä½¿ç”¨ TypeScript æ¥ç¼–å†™ Webpack é…ç½®æ–‡ä»¶æœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—ä¼˜åŠ¿ï¼š</p><p>âœ¨ æ™ºèƒ½æç¤ºï¼šIDE å¯ä»¥æä¾›å‡†ç¡®çš„ä»£ç è¡¥å…¨å’Œæç¤º ğŸ›¡ï¸ ç±»å‹å®‰å…¨ï¼šåœ¨ç¼–è¯‘æ—¶å°±èƒ½å‘ç°æ½œåœ¨çš„é…ç½®é”™è¯¯ ğŸ” æ›´å¥½çš„å¯ç»´æŠ¤æ€§ï¼šç±»å‹å£°æ˜å³æ–‡æ¡£ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œ ğŸš€ æé«˜å¼€å‘æ•ˆç‡ï¼šå‡å°‘æŸ¥é˜…æ–‡æ¡£çš„æ—¶é—´</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># å®‰è£…æ ¸å¿ƒä¾èµ–</span>\n<span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript ts-node @types/node @types/webpack\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// webpack.config.ts</span>\n<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> webpack <span class="token keyword">from</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> config<span class="token operator">:</span> webpack<span class="token punctuation">.</span>Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>\n  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>\n  entry<span class="token operator">:</span> <span class="token string">&quot;./foo.js&quot;</span><span class="token punctuation">,</span>\n  output<span class="token operator">:</span> <span class="token punctuation">{</span>\n    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    filename<span class="token operator">:</span> <span class="token string">&quot;foo.bundle.js&quot;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="è§£å†³æ¨¡å—åŒ–é—®é¢˜"><a class="header-anchor" href="#è§£å†³æ¨¡å—åŒ–é—®é¢˜">#</a> è§£å†³æ¨¡å—åŒ–é—®é¢˜</h4><p>åœ¨ä½¿ç”¨ TypeScript ç¼–å†™ Webpack é…ç½®æ—¶ï¼Œæœ€å¸¸è§çš„é—®é¢˜æ˜¯æ¨¡å—åŒ–é…ç½®</p><p>ä½¿ç”¨ç‹¬ç«‹çš„ TypeScript é…ç½®</p><ul><li>å®‰è£…ä¾èµ–ï¼š</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev --save-exact tsconfig-paths cross-env\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>åˆ›å»ºä¸“ç”¨é…ç½®æ–‡ä»¶ tsconfig-for-webpack-config.json</li></ul><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>\n  <span class="token string">&quot;scripts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>\n    <span class="token string">&quot;build&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;cross-env TS_NODE_PROJECT=<span class="token entity" title="\\&quot;">\\&quot;</span>tsconfig-for-webpack-config.json<span class="token entity" title="\\&quot;">\\&quot;</span> webpack&quot;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="purgecss-webpack-plugin-ç§»é™¤æ— ç”¨çš„-class-æ ·å¼"><a class="header-anchor" href="#purgecss-webpack-plugin-ç§»é™¤æ— ç”¨çš„-class-æ ·å¼">#</a> purgecss-webpack-plugin ç§»é™¤æ— ç”¨çš„ class æ ·å¼</h4><p>é€šè¿‡ purgecss-webpack-pluginï¼Œå¯ä»¥è¯†åˆ«æ²¡æœ‰ç”¨åˆ°çš„ classï¼Œå°†å…¶ä» css æ–‡ä»¶ä¸­ treeShaking æ‰ï¼Œéœ€è¦é…åˆ mini-css-extract-plugin ä¸€èµ·ä½¿ç”¨</p><h4 id="markdown-ä½¿ç”¨æŒ‡å—"><a class="header-anchor" href="#markdown-ä½¿ç”¨æŒ‡å—">#</a> MarkDown ä½¿ç”¨æŒ‡å—</h4><ul><li><a href="../../blog-daily/use-markdown">MarkDown</a> <span style="color:#bbb;float:right;">2021-06-24</span></li></ul>',44),C={render:function(n,s){const a=(0,p.up)("OutboundLink");return(0,p.wg)(),(0,p.j4)(p.HY,null,[e,(0,p.Wm)("p",null,[(0,p.Wm)("a",t,[o,(0,p.Wm)(a)]),c,(0,p.Wm)("a",l,[r,(0,p.Wm)(a)]),u,(0,p.Wm)("a",i,[k,(0,p.Wm)(a)]),b,(0,p.Wm)("a",m,[d,(0,p.Wm)(a)]),g,(0,p.Wm)("a",h,[v,(0,p.Wm)(a)]),w,(0,p.Wm)("a",f,[q,(0,p.Wm)(a)]),y,(0,p.Wm)("a",W,[j,(0,p.Wm)(a)]),(0,p.Wm)("a",S,[x,(0,p.Wm)(a)])]),P],64)}}}}]);