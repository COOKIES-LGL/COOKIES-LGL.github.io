(self.webpackChunkvuepress_blog=self.webpackChunkvuepress_blog||[]).push([[967],{8733:(e,a,s)=>{"use strict";s.r(a),s.d(a,{data:()=>l});const l={key:"v-6c156cd8",path:"/pages/blog-daily/live-code-debug/",title:"",lang:"zh-CN",frontmatter:{sidebar:"auto"},excerpt:"",headers:[{level:3,title:"live code debug",slug:"live-code-debug",children:[]},{level:3,title:"思路",slug:"思路",children:[]},{level:3,title:"配置 Charles",slug:"配置-charles",children:[]},{level:3,title:"调试步骤",slug:"调试步骤",children:[]}],filePathRelative:"pages/blog-daily/live-code-debug/README.md",git:{updatedTime:1733294272e3,contributors:[{name:"COOKIES-LGL",email:"1344714332@qq.com",commits:2},{name:"guilin.li",email:"1344714332@qq.com",commits:1}]}}},9767:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>h});var l=s(6252);const n=(0,l.uE)('<h3 id="live-code-debug"><a class="header-anchor" href="#live-code-debug">#</a> live code debug</h3><p>1、目前因跨域限制本地开发环境（localhost:4200）只能连接到 test 环境。 2、Live 等环境的代码经过 Babel 转化和压缩后调试困难，不利于排查问题。 3、因此下文主要介绍如何使用本地开发环境调试线上(live、staging、uat 等)数据。</p><h3 id="思路"><a class="header-anchor" href="#思路">#</a> 思路</h3><p>访问线上环境时通过 Charles 映射线上请求的 vendor.js 和 seller.js 为本地 localhost 对应的路径。</p><h3 id="配置-charles"><a class="header-anchor" href="#配置-charles">#</a> 配置 Charles</h3><h4 id="rewrite"><a class="header-anchor" href="#rewrite">#</a> Rewrite</h4>',6),t=(0,l.Wm)("li",null,"点击 Charles 的 Tools -> Rewrite... (快捷键：⌘⌥R)。",-1),r=(0,l.Wm)("li",null,"点击 Import 导入 sc-rewrite.xml。",-1),i=(0,l.Uk)("勾选 Enable Rewrite。 完成之后的效果应该是这样： "),o=(0,l.Wm)("h4",{id:"map-remote"},[(0,l.Wm)("a",{class:"header-anchor",href:"#map-remote"},"#"),(0,l.Uk)(" Map Remote")],-1),c=(0,l.Wm)("li",null,"点击 Charles 的 Tools -> Map Remote... (快捷键：⌘⌥M)。",-1),p=(0,l.Wm)("li",null,"点击 Import 导入 sc-map.xml。",-1),u=(0,l.Uk)("勾选 Enable Map Remote。 完成之后的效果应该是这样： "),d=(0,l.uE)('<h3 id="调试步骤"><a class="header-anchor" href="#调试步骤">#</a> 调试步骤</h3><p>1、修改 environment.local.js 文件：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token constant">COUNTRY</span><span class="token operator">:</span> <span class="token string">&quot;sg&quot;</span><span class="token punctuation">,</span>\n  shopEnvironment<span class="token operator">:</span> <span class="token string">&quot;live&quot;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2、使用 yarn dev 或 npm start 命令启动本地项目。 3、打开浏览器访问 https://seller.shop.sg。 4、修改本地文件后重新刷新浏览器。 5、当需要切换国家或者 staging 和 live 时，修改 environment.local.js 即可。</p>',4),h={render:function(e,a){return(0,l.wg)(),(0,l.j4)(l.HY,null,[n,(0,l.Wm)("ol",null,[t,r,(0,l.Wm)("li",null,[i,(0,l.Wm)("img",{src:e.$withBase("./images/daily-blog/debug-live-code1.png")},null,8,["src"])])]),o,(0,l.Wm)("ol",null,[c,p,(0,l.Wm)("li",null,[u,(0,l.Wm)("img",{src:e.$withBase("./images/daily-blog/debug-live-code2.png")},null,8,["src"])])]),d],64)}}}}]);